ishomme(yes,michaeljackson).
ishomme(yes,stephenharper).
ishomme(yes,mozart).
ishomme(yes,michelgagno).
ishomme(no,blancheneige).
ishomme(yes,rafalnadal).
ishomme(yes,garfield).
ishomme(yes,micheldagenais).
ishomme(yes,johnlewis).
ishomme(yes,papefrancois).
ishomme(yes,jamesbond).
ishomme(no,juliesnyder).
ishomme(yes,moise).
ishomme(yes,mario).
ishomme(no,laracroft).
ishomme(no,jkrowling).
ishomme(yes,jacquesvilleneuve).
ishomme(no,cleopatre7).
ishomme(yes,victorhugo).
ishomme(yes,jesus).
ishomme(no,eugeniebouchard).
ishomme(yes,bradpitt).

isfictif(no,michaeljackson).
isfictif(no,stephenharper).
isfictif(no,mozart).
isfictif(no,michelgagno).
isfictif(yes,blancheneige).
isfictif(no,rafalnadal).
isfictif(yes,garfield).
isfictif(no,micheldagenais).
isfictif(no,johnlewis).
isfictif(no,papefrancois).
isfictif(yes,jamesbond).
isfictif(no,juliesnyder).
isfictif(yes,moise).
isfictif(yes,mario).
isfictif(yes,laracroft).
isfictif(no,jkrowling).
isfictif(no,jacquesvilleneuve).
isfictif(no,cleopatre7).
isfictif(no,victorhugo).
isfictif(yes,jesus).
isfictif(no,eugeniebouchard).
isfictif(no,bradpitt).

isdead(yes,michaeljackson).
isdead(no,stephenharper).
isdead(yes,mozart).
isdead(no,michelgagno).
isdead(no,blancheneige).
isdead(no,rafalnadal).
isdead(no,garfield).
isdead(no,micheldagenais).
isdead(no,johnlewis).
isdead(no,papefrancois).
isdead(no,jamesbond).
isdead(no,juliesnyder).
isdead(yes,moise).
isdead(no,mario).
isdead(no,laracroft).
isdead(no,jkrowling).
isdead(no,jacquesvilleneuve).
isdead(yes,cleopatre7).
isdead(yes,victorhugo).
isdead(no,jesus).
isdead(no,eugeniebouchard).
isdead(no,bradpitt).

isquebecois(no,michaeljackson).
isquebecois(no,stephenharper).
isquebecois(no,mozart).
isquebecois(yes,michelgagno).
isquebecois(no,blancheneige).
isquebecois(no,rafalnadal).
isquebecois(no,garfield).
isquebecois(yes,micheldagenais).
isquebecois(no,johnlewis).
isquebecois(no,papefrancois).
isquebecois(no,jamesbond).
isquebecois(yes,juliesnyder).
isquebecois(no,moise).
isquebecois(no,mario).
isquebecois(no,laracroft).
isquebecois(no,jkrowling).
isquebecois(yes,jacquesvilleneuve).
isquebecois(no,cleopatre7).
isquebecois(no,victorhugo).
isquebecois(no,jesus).
isquebecois(yes,eugeniebouchard).
isquebecois(no,bradpitt).

issportif(no,michaeljackson).
issportif(no,stephenharper).
issportif(no,mozart).
issportif(no,michelgagno).
issportif(no,blancheneige).
issportif(yes,rafalnadal).
issportif(no,garfield).
issportif(no,micheldagenais).
issportif(no,johnlewis).
issportif(no,papefrancois).
issportif(no,jamesbond).
issportif(no,juliesnyder).
issportif(no,moise).
issportif(yes,mario).
issportif(no,laracroft).
issportif(no,jkrowling).
issportif(yes,jacquesvilleneuve).
issportif(no,cleopatre7).
issportif(no,victorhugo).
issportif(no,jesus).
issportif(yes,eugeniebouchard).
issportif(no,bradpitt).

isamerican(yes,michaeljackson).
isamerican(no,stephenharper).
isamerican(no,mozart).
isamerican(no,michelgagno).
isamerican(no,blancheneige).
isamerican(no,rafalnadal).
isamerican(yes,garfield).
isamerican(no,micheldagenais).
isamerican(yes,johnlewis).
isamerican(no,papefrancois).
isamerican(no,jamesbond).
isamerican(no,juliesnyder).
isamerican(no,moise).
isamerican(no,mario).
isamerican(yes,laracroft).
isamerican(no,jkrowling).
isamerican(no,jacquesvilleneuve).
isamerican(no,cleopatre7).
isamerican(no,victorhugo).
isamerican(no,jesus).
isamerican(no,eugeniebouchard).
isamerican(yes,bradpitt).

ispolitician(no,michaeljackson).
ispolitician(yes,stephenharper).
ispolitician(no,mozart).
ispolitician(no,michelgagno).
ispolitician(no,blancheneige).
ispolitician(no,rafalnadal).
ispolitician(no,garfield).
ispolitician(no,micheldagenais).
ispolitician(yes,johnlewis).
ispolitician(no,papefrancois).
ispolitician(no,jamesbond).
ispolitician(no,juliesnyder).
ispolitician(no,moise).
ispolitician(no,mario).
ispolitician(no,laracroft).
ispolitician(no,jkrowling).
ispolitician(no,jacquesvilleneuve).
ispolitician(yes,cleopatre7).
ispolitician(no,victorhugo).
ispolitician(no,jesus).
ispolitician(no,eugeniebouchard).
ispolitician(no,bradpitt).

iswriter(no,michaeljackson).
iswriter(no,stephenharper).
iswriter(no,mozart).
iswriter(no,michelgagno).
iswriter(no,blancheneige).
iswriter(no,rafalnadal).
iswriter(no,garfield).
iswriter(no,micheldagenais).
iswriter(no,johnlewis).
iswriter(no,papefrancois).
iswriter(no,jamesbond).
iswriter(no,juliesnyder).
iswriter(no,moise).
iswriter(no,mario).
iswriter(no,laracroft).
iswriter(yes,jkrowling).
iswriter(no,jacquesvilleneuve).
iswriter(no,cleopatre7).
iswriter(yes,victorhugo).
iswriter(no,jesus).
iswriter(no,eugeniebouchard).
iswriter(no,bradpitt).

isreligiousfigure(no,michaeljackson).
isreligiousfigure(no,stephenharper).
isreligiousfigure(no,mozart).
isreligiousfigure(no,michelgagno).
isreligiousfigure(no,blancheneige).
isreligiousfigure(no,rafalnadal).
isreligiousfigure(no,garfield).
isreligiousfigure(no,micheldagenais).
isreligiousfigure(no,johnlewis).
isreligiousfigure(yes,papefrancois).
isreligiousfigure(no,jamesbond).
isreligiousfigure(no,juliesnyder).
isreligiousfigure(yes,moise).
isreligiousfigure(no,mario).
isreligiousfigure(no,laracroft).
isreligiousfigure(no,jkrowling).
isreligiousfigure(no,jacquesvilleneuve).
isreligiousfigure(no,cleopatre7).
isreligiousfigure(no,victorhugo).
isreligiousfigure(yes,jesus).
isreligiousfigure(no,eugeniebouchard).
isreligiousfigure(no,bradpitt).

isteachAI(no,michaeljackson).
isteachAI(no,stephenharper).
isteachAI(no,mozart).
isteachAI(yes,michelgagno).
isteachAI(no,blancheneige).
isteachAI(no,rafalnadal).
isteachAI(no,garfield).
isteachAI(no,micheldagenais).
isteachAI(no,johnlewis).
isteachAI(no,papefrancois).
isteachAI(no,jamesbond).
isteachAI(no,juliesnyder).
isteachAI(no,moise).
isteachAI(no,mario).
isteachAI(no,laracroft).
isteachAI(no,jkrowling).
isteachAI(no,jacquesvilleneuve).
isteachAI(no,cleopatre7).
isteachAI(no,victorhugo).
isteachAI(no,jesus).
isteachAI(no,eugeniebouchard).
isteachAI(no,bradpitt).


questions([
[ishomme,'Est-ce que c\'est un homme?'],
[isfictif,'Est-ce que c\'est un personnage fictif?'],
[isdead,'Est-ce qu\'il est mort?'],
[isquebecois,'Est-ce qu\'il est quebecois?'],
[issportif,'Est-ce qu\'il est un sportif?'],
[isamerican,'Est-ce qu\'il est americain?'],
[ispolitician,'Est-ce qu\'il est un politicien/dirigeant?'],
[iswriter,'Est-ce que c\'est un ecrivain?'],
[isreligiousfigure,'Est-ce que c\'est une figure religieuse?'],
[isteachAI,'Est-ce qu\'il enseigne l\'intelligence artificielle?']]).

possibilities([michaeljackson,
stephenharper,
mozart,
michelgagno,
blancheneige,
rafalnadal,
garfield,
micheldagenais,
johnlewis,
papefrancois,
jamesbond,
juliesnyder,
moise,
mario,
laracroft,
jkrowling,
jacquesvilleneuve,
cleopatre7,
victorhugo,
jesus,
eugeniebouchard,
bradpitt]).

askQuestion([Pred,Question],PosIn,PosOut):-
	write(Question),
	nl,read(Reponse),
 	filter(PosIn,PosOut,Pred,Reponse).



getFirstQuestion(Questions,Chosen,Reste,Pos):-
	getFirstQuestion(Questions,_,Chosen,Reste,Pos).

getFirstQuestion([[Pred, Question]], Ratio, Chosen, Reste,Pos) :-
  Chosen = [Pred, Question],
  Reste = [],
  getRatio(Pos,Pred, Ratio).

getFirstQuestion([[Pred, Question]|Tail], BestRatio, Chosen, Reste,Pos) :-
  getRatio(Pos,Pred, Ratio),
  getFirstQuestion(Tail, NewBestRatio, NewBest, NewList,Pos),
  (
    Ratio > NewBestRatio ->
      BestRatio = Ratio,
      Reste = Tail,
      Chosen = [Pred, Question];
    otherwise ->
      BestRatio = NewBestRatio,
      append(NewList, [[Pred, Question]], Reste),
      Chosen = NewBest
  ).


personnage(X) :- write('Veuillez penser a un personnage de la liste! Les reponses sont yes. et no.'),
	nl,	
	questions(ListQuestions),
	possibilities(Pos),
	iteration(X,ListQuestions,Pos).

iteration(X,[],Pos):-
	X = Pos.

iteration(X,ListQuestions,Pos):-
	length(Pos,L),
	L==1,
	X= Pos.

iteration(X,ListQuestions,[]):-
	write('NO SUCH PERSON!'),
	X= Pos.
	
iteration(X,ListQuestions,Pos):-
	getFirstQuestion(ListQuestions,Question,Rest,Pos),
	askQuestion(Question,Pos,PosOut),
	iteration(X,Rest,PosOut	).


filter([],[],Pred,Val).


filter([L|List],[L|Filtered],Pred,Val) :-
    	call(Pred,Val,L),
    	filter(List,Filtered,Pred,Val).

filter([L|List],Filtered,Pred,Val) :-
    	filter(List,Filtered,Pred,Val).


getRatio(Pos,Pred,Ratio):-
	filter(Pos,Positif,Pred,yes),
	filter(Pos,Negatif,Pred,no),
	length(Positif, NumPos),
	length(Negatif, NumNeg),
	genRatio(NumPos,NumNeg,Ratio).
	
genRatio(A,B,Out):-
	A=<B,
	Out is A/B.
	
genRatio(A,B,Out):-
	B<A,
	Out is B/A.

