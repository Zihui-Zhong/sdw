iselectro(yes,aspirateur).
iselectro(yes,telephone).
iselectro(no,balai).
iselectro(no,assiette).
iselectro(yes,cuisiniere).
iselectro(yes,grillepain).
iselectro(no,casserole).
iselectro(no,detergent).
iselectro(no,cle).
iselectro(no,sacados).
iselectro(yes,lampe).
iselectro(yes,ordinateur).
iselectro(no,fourchette).
iselectro(no,cactus).
iselectro(yes,microonde).
iselectro(yes,cafetiere).
iselectro(no,table).
iselectro(no,shampoing).
iselectro(no,lit).
iselectro(no,portefeuille).
iselectro(no,piano).
iselectro(no,papier).

iscuisine(no,aspirateur).
iscuisine(yes,telephone).
iscuisine(no,telephone).
iscuisine(no,balai).
iscuisine(yes,assiette).
iscuisine(yes,cuisiniere).
iscuisine(yes,grillepain).
iscuisine(yes,casserole).
iscuisine(yes,detergent).
iscuisine(no,cle).
iscuisine(no,sacados).
iscuisine(yes,lampe).
iscuisine(no,lampe).
iscuisine(no,ordinateur).
iscuisine(yes,fourchette).
iscuisine(no,cactus).
iscuisine(yes,cactus).
iscuisine(yes,microonde).
iscuisine(yes,cafetiere).
iscuisine(yes,table).
iscuisine(no,shampoing).
iscuisine(no,lit).
iscuisine(no,portefeuille).
iscuisine(no,piano).
iscuisine(no,papier).

isleger(yes,aspirateur).
isleger(yes,telephone).
isleger(yes,balai).
isleger(yes,assiette).
isleger(yes,assiette).
isleger(no,cuisiniere).
isleger(yes,grillepain).
isleger(yes,casserole).
isleger(yes,detergent).
isleger(yes,cle).
isleger(yes,sacados).
isleger(yes,lampe).
isleger(no,lampe).
isleger(no,ordinateur).
isleger(yes,fourchette).
isleger(yes,cactus).
isleger(no,microonde).
isleger(yes,cafetiere).
isleger(no,table).
isleger(yes,shampoing).
isleger(no,lit).
isleger(yes,portefeuille).
isleger(yes,papier).
isleger(no,piano).


isbruit(yes,aspirateur).
isbruit(yes,telephone).
isbruit(no,balai).
isbruit(no,assiette).
isbruit(no,cuisiniere).
isbruit(no,grillepain).
isbruit(no,casserole).
isbruit(no,detergent).
isbruit(no,cle).
isbruit(no,sacados).
isbruit(no,lampe).
isbruit(yes,ordinateur).
isbruit(no,fourchette).
isbruit(no,cactus).
isbruit(yes,microonde).
isbruit(no,cafetiere).
isbruit(no,table).
isbruit(no,shampoing).
isbruit(no,lit).
isbruit(no,portefeuille).
isbruit(yes,piano).
isbruit(no,papier).


isnettoyer(yes,aspirateur).
isnettoyer(no,telephone).
isnettoyer(yes,balai).
isnettoyer(no,assiette).
isnettoyer(no,cuisiniere).
isnettoyer(no,grillepain).
isnettoyer(no,casserole).
isnettoyer(yes,detergent).
isnettoyer(no,cle).
isnettoyer(no,sacados).
isnettoyer(no,lampe).
isnettoyer(no,ordinateur).
isnettoyer(no,fourchette).
isnettoyer(no,cactus).
isnettoyer(no,microonde).
isnettoyer(no,cafetiere).
isnettoyer(no,table).
isnettoyer(yes,shampoing).
isnettoyer(no,lit).
isnettoyer(no,portefeuille).
isnettoyer(no,piano).
isnettoyer(no,papier).


ismain(no,aspirateur).
ismain(yes,telephone).
ismain(no,balai).
ismain(no,assiette).
ismain(no,cuisiniere).
ismain(no,grillepain).
ismain(no,casserole).
ismain(yes,detergent).
ismain(yes,cle).
ismain(no,sacados).
ismain(no,lampe).
ismain(no,ordinateur).
ismain(yes,fourchette).
ismain(no,cactus).
ismain(no,microonde).
ismain(no,cafetiere).
ismain(no,table).
ismain(yes,shampoing).
ismain(no,lit).
ismain(yes,portefeuille).
ismain(no,piano).
ismain(no,papier).

isconteneur(yes,aspirateur).
isconteneur(no,telephone).
isconteneur(no,balai).
isconteneur(yes,assiette).
isconteneur(yes,cuisiniere).
isconteneur(yes,grillepain).
isconteneur(yes,casserole).
isconteneur(no,detergent).
isconteneur(no,cle).
isconteneur(yes,sacados).
isconteneur(no,lampe).
isconteneur(no,ordinateur).
isconteneur(no,fourchette).
isconteneur(no,cactus).
isconteneur(yes,microonde).
isconteneur(yes,cafetiere).
isconteneur(no,table).
isconteneur(no,shampoing).
isconteneur(no,lit).
isconteneur(yes,portefeuille).
isconteneur(no,piano).
isconteneur(no,papier).

isliquid(no,aspirateur).
isliquid(no,telephone).
isliquid(no,balai).
isliquid(no,assiette).
isliquid(no,cuisiniere).
isliquid(no,grillepain).
isliquid(yes,casserole).
isliquid(yes,detergent).
isliquid(no,cle).
isliquid(no,sacados).
isliquid(no,lampe).
isliquid(no,ordinateur).
isliquid(no,fourchette).
isliquid(no,cactus).
isliquid(no,microonde).
isliquid(yes,cafetiere).
isliquid(no,table).
isliquid(yes,shampoing).
isliquid(no,lit).
isliquid(no,portefeuille).
isliquid(no,piano).
isliquid(no,papier).

isinfo(no,aspirateur).
isinfo(yes,telephone).
isinfo(no,balai).
isinfo(no,assiette).
isinfo(no,cuisiniere).
isinfo(no,grillepain).
isinfo(no,casserole).
isinfo(no,detergent).
isinfo(no,cle).
isinfo(no,sacados).
isinfo(no,lampe).
isinfo(yes,ordinateur).
isinfo(no,fourchette).
isinfo(no,cactus).
isinfo(no,microonde).
isinfo(no,cafetiere).
isinfo(no,table).
isinfo(no,shampoing).
isinfo(no,lit).
isinfo(yes,portefeuille).
isinfo(no,piano).
isinfo(yes,papier).

questions([
[iselectro,'Est-ce que c\'est un objet electrique/electronique?'],
[iscuisine,'Est-ce qu\'on le retrouve dans la cuisine?'],
[isleger,'Est-ce qu\'il est leger?'],
[isbruit,'Est-ce qu\'il fait du bruit?'],
[isnettoyer,'Est-ce qu\'on s\'en sert pour nettoyer?'],
[ismain,'Est-ce qu\'il tient dans une main?'],
[isconteneur,'Est-ce qu\'il peut contenir de quoi?'],
[isliquid,'Est-ce qu\'on s\'en sert avec des liquide ou c\'est liquide?'],
[isinfo,'Est-ce qu\'on peut garder de l\'information dessus/dedans?']]).

possibilities([aspirateur,
telephone,
balai,
assiette,
cuisiniere,
grillepain,
casserole,
detergent,
cle,
sacados,
lampe,
ordinateur,
fourchette,
cactus,
microonde,
cafetier,
table,
shampoing,
lit,
portefeuille,
piano,
papier]).

askQuestion([Pred,Question],PosIn,PosOut):-
	write(Question),
	nl,read(Reponse),
 	filter(PosIn,PosOut,Pred,Reponse).



getFirstQuestion(Questions,Chosen,Reste,Pos):-
	getFirstQuestion(Questions,_,Chosen,Reste,Pos).

getFirstQuestion([[Pred, Question]], Ratio, Chosen, Reste,Pos) :-
  Chosen = [Pred, Question],
  Reste = [],
  getRatio(Pos,Pred, Ratio).

getFirstQuestion([[Pred, Question]|Tail], BestRatio, Chosen, Reste,Pos) :-
  getRatio(Pos,Pred, Ratio),
  getFirstQuestion(Tail, NewBestRatio, NewBest, NewList,Pos),
  (
    Ratio > NewBestRatio ->
      BestRatio = Ratio,
      Reste = Tail,
      Chosen = [Pred, Question];
    otherwise ->
      BestRatio = NewBestRatio,
      append(NewList, [[Pred, Question]], Reste),
      Chosen = NewBest
  ).


objet(X) :- write('Veuillez penser a un objet de la liste! Les reponses sont yes. et no.'),
	nl,	
	questions(ListQuestions),
	possibilities(Pos),
	iteration(X,ListQuestions,Pos).

iteration(X,[],Pos):-
	X = Pos.

iteration(X,ListQuestions,Pos):-
	length(Pos,L),
	L==1,
	X= Pos.

iteration(X,ListQuestions,[]):-
	write('NO SUCH OBJECT!'),
	X= Pos.
	
iteration(X,ListQuestions,Pos):-
	getFirstQuestion(ListQuestions,Question,Rest,Pos),
	askQuestion(Question,Pos,PosOut),
	iteration(X,Rest,PosOut	).


filter([],[],Pred,Val).


filter([L|List],[L|Filtered],Pred,Val) :-
    	call(Pred,Val,L),
    	filter(List,Filtered,Pred,Val).

filter([L|List],Filtered,Pred,Val) :-
    	filter(List,Filtered,Pred,Val).


getRatio(Pos,Pred,Ratio):-
	filter(Pos,Positif,Pred,yes),
	filter(Pos,Negatif,Pred,no),
	length(Positif, NumPos),
	length(Negatif, NumNeg),
	genRatio(NumPos,NumNeg,Ratio).
	
genRatio(A,B,Out):-
	A=<B,
	Out is A/B.
	
genRatio(A,B,Out):-
	B<A,
	Out is B/A.

